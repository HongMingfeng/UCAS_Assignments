### 离散事件仿真（第3-12页）

**定义与特点**

1. **离散事件系统的定义**  
   - 离散事件系统（Discrete Event System，DES）是指系统的状态仅在离散的时间点上发生变化，而这些离散时间点一般是随机或不确定的。
   - 这种系统中，事件发生的时间并不连续，而是依赖于特定的触发条件，通常事件会导致系统状态的变化。
   
2. **离散事件仿真的特点**  
   - **随机性**：系统状态变化具有随机性，同一初始状态可能转变为多种不同状态。
   - **庞杂性**：DES比简单系统更加复杂，但不像连续系统那样复杂，通常使用离散的事件描述系统的动态行为。
   - **模糊性**：由于难以通过明确的数学函数描述状态变化，DES通常依赖于统计规律来模拟系统行为。

**离散事件仿真实例：银行业务办理**  
- 该示例展示了离散事件仿真的基本过程和系统元素。设定的参数包括：
  - **客户流**服从泊松分布，平均每小时有10位客户到达。
  - **服务台**仅有一名柜员，客户的平均服务时间为5分钟。

- **问题分析**：客户的排队平均等待时间。在此基础上，通过仿真模型计算客户的排队时间，并观察不同参数设置对排队的影响。

**事件调度与解析解**  
- 在特定条件下（如服务时间服从负指数分布），可以为此系统计算解析解。然而，若进一步放松假设条件，如增加柜员数或不同柜员服务时间的分布，解析解变得难以获得。这时，DES能有效地模拟系统的行为和复杂性。

**数学解析模型与仿真模型对比**  
- **数学解析模型**：适用于确定性、静态系统，便于获得解析解，能够快速提供答案，但难以捕捉动态复杂系统的时间约束和随机性。
- **仿真模型**：具有动态性，适合复杂度高、因果关系不明显的系统，可以捕捉系统中的随机性和细节，但需要较长的构建时间和更高的技术要求。

**系统动力学 vs 离散事件仿真**  
- **系统动力学**（System Dynamics）：通常用于长期、战略性问题的建模，高度抽象，将系统中的人、产品、事件等视为聚合量，适合宏观层面的分析。
- **离散事件仿真**：适合模拟操作层面的过程，具有高度具体性，关注“重要的”时刻和事件，捕捉离散的状态变化。

### 离散事件仿真主要元素（第14-20页）

**系统状态**
- **定义**：系统状态是由一组状态变量描述的，表征系统在某一时刻的具体情况。这些变量随时间和事件的发生而改变。
- **应用**：在银行系统中，系统状态可能包括当前服务中的人数、排队人数、已服务人数等。

**实体（Entity）**
- **临时实体**：只存在于系统中一段时间的对象，如银行排队的顾客。
- **永久实体**：始终存在于系统中的对象，如银行的柜员或服务窗口。

**属性（Attribute）**
- **定义**：属性是实体的特性，用于描述该实体的独特性。每个实体可能具有不同的属性。
- **应用**：在银行系统中，顾客作为实体，其属性可能包括账户信息、服务需求等。

**事件（Event）**
- **定义**：事件是引起系统状态变化的瞬时行为。事件的发生通常会触发新的事件，驱动仿真的进程。
- **分类**：
  - **内生事件**：由模型内部活动引起的事件（例如顾客服务结束后离开队列）。
  - **外生事件**：由外部因素引起的事件（例如顾客到达银行的时间和人数）。

**活动（Activity）**
- **定义**：活动是实体在两个事件之间保持某一状态的持续过程。例如，在银行中，顾客等待和接受服务是两种活动。
- **特点**：活动的开始和结束通常由事件触发。

**进程（Process）**
- **定义**：进程由一系列有序事件和活动组成，描述了事件之间的相互关系和时序逻辑。
- **应用**：在银行系统中，进程可以包括顾客进入队列、等待、接受服务、离开等一系列事件的顺序。

**仿真时钟（Simulation Clock）**
- **定义**：仿真时钟用于记录仿真时间的变化，控制仿真过程的时序。这并不是计算机执行仿真的实际时间，而是模型中反映系统进展的时间。
- **功能**：仿真时钟通常从零开始，记录每个事件的发生时间，并根据事件调度进行推进。

**规则（Rule）**
- **定义**：规则是用于描述实体之间、以及实体与仿真时钟之间相互影响的条件。
- **应用**：规则控制实体的行为方式，如顾客排队时的顺序或服务优先级。

**事件表（Future Event List, FEL）**
- **定义**：事件表是离散事件仿真建模的核心工具，用于记录系统中所有即将发生的事件。
- **结构**：每个事件在事件表中占一行，记录其发生时间、类型和相关的后续事件。
- **事件表处理**：为了节省内存和简化操作，事件表仅保存未发生的事件，已完成的事件会被移除。

### 离散事件仿真中的仿真策略（第22-28页）

**仿真策略的定义**
- 仿真策略是离散事件仿真模型的核心，决定了模型的控制逻辑和仿真时钟推进机制。它反映了模型的本质，从根本上决定了模型的结构和行为。

**三种主要的仿真策略**

1. **事件调度法（Event Scheduling）**
   - **基本思想**：事件调度法以事件为分析的基本单元，通过定义事件及其对系统状态的影响来驱动模型运行。
   - **工作方式**：系统会按时间顺序确定和执行事件，并根据当前事件的结果调度新的事件。
   - **要点**：
     - **事件产生**：根据当前状态生成新事件，加入事件表。
     - **系统变化**：事件发生后，系统状态更新。
     - **统计分析**：对仿真结果进行统计和分析，评估系统性能。
   - **应用场景**：适合在一个确定事件发生后产生其他事件的系统，如银行服务系统中的顾客到达和离开事件。

2. **活动扫描法（Activity Scanning）**
   - **基本思想**：活动扫描法关注系统中的活动状态。仿真时钟按固定时间步长推进，每一步时钟检查所有活动的状态，确定当前需要进行的活动。
   - **工作方式**：每个时间步会扫描所有活动状态，根据条件激活相应活动。
   - **优点与缺点**：
     - **优点**：适合并行或多重活动过程，时间步长固定，便于处理复杂的状态条件。
     - **缺点**：每步扫描可能导致效率低下，尤其在大量无活动变化的情况下。
   - **应用场景**：适合具有多个并行活动的系统，如生产流水线或复杂的制造系统。

3. **进程交互法（Process Interaction）**
   - **基本思想**：进程交互法基于各个实体的生命周期，定义每个实体在系统中的行为和交互。系统以每个实体的生命周期为基本单元，模拟实体的各阶段变化。
   - **工作方式**：每个实体在其生命周期中经历多个事件和状态，事件触发进程中的状态变化。模型以实体的视角进行控制和调度。
   - **优点**：适合高度模块化的系统，能够描述复杂的实体行为和交互，便于模型结构化和模块化。
   - **应用场景**：适合以实体行为为主的仿真，如人员管理系统、交通系统等。

**事件调度法的具体实施**

1. **总控程序**
   - **时间扫描**：总控程序负责扫描事件表，确定下一个事件的发生时间，并将仿真时钟推进至该时刻。
   - **事件辨识**：识别即将发生的事件类型。
   - **事件执行**：根据事件类型调用对应的事件处理例程，更新系统状态并调度新的事件。

2. **事件表的管理**
   - 事件表是仿真过程中保存未来事件信息的关键工具。每次执行一个事件后，从事件表中移除已发生事件，保持表中仅有未发生的事件。

**示例：排队系统中的总控程序**
- 以银行排队系统为例，顾客到达和离开是两个主要事件，总控程序会不断扫描事件表，执行当前时刻的事件，并根据系统状态更新下一事件的发生时间。

### 离散事件仿真模型的设计思路与步骤（第30-37页）

**离散事件仿真模型的设计思路**

1. **自底向上建模**  
   - 离散事件仿真采用自底向上的建模方法，先定义系统中各个独立实体的行为和事件，再逐步构建系统的整体结构。这种方法不同于系统动力学中的自上而下建模，适合操作层面的细节建模。

2. **实体的异质性**  
   - 模型中的实体可以具备异质性，即相同类型的实体（如不同客户）可以拥有不同的属性值。这些属性可以分为：
     - **外生属性**：如客户办理的业务类型，不受系统事件的影响。
     - **内生属性**：如客户在队列中的位置，可能随事件的发生而改变。
   - 需要注意的是，离散事件仿真模型中的实体没有自治性，它们的行为和状态由系统事件和规则驱动。

3. **流程图设计**  
   - 使用流程图直观描述系统中各事件的时序关系和逻辑。流程图通常用于定义模型的事件子程序，帮助清晰地展示系统的运作逻辑。

---

**离散事件仿真模型设计的主要步骤**

1. **确定模型中的实体并划定系统边界**  
   - 明确系统中存在的各类实体，如顾客、服务员等，定义它们的属性。
   - 划定系统边界，忽略不重要的实体，聚焦于关键的事件和流程。
   - **示例**：在银行排队系统中，顾客是临时实体，服务员是永久实体。

2. **调研系统流程，明确队列及其规则**  
   - 分析实体的流动过程，确定各实体进入、离开系统的条件和顺序。
   - 定义队列的类型，如先进先出（FIFO）、优先级队列等。
   - **示例**：银行系统中，客户按先来后到的顺序进入队列，接受服务。

3. **识别关键事件，分析实体与队列的交互**  
   - 确定哪些事件引发实体状态的改变及其在队列中的位置变化，分析实体和队列之间的交互规则。
   - **示例**：顾客到达银行进入队列、开始接受服务、服务结束离开队列。

4. **计算活动时间及其分布参数**  
   - 对模型中的活动时间进行计算，并为每种活动设定分布参数（如均匀分布、指数分布等），为仿真模型的定量分析奠定基础。
   - **示例**：银行系统中，顾客的到达时间可能服从泊松分布，服务时间服从负指数分布。

---

**输入与输出数据的分析**

1. **输入数据分析**
   - **数据收集**：收集系统的原始数据，并规划数据表格以便后续分析。
   - **分布识别**：利用直方图或先验知识判断输入数据的分布类型。
   - **参数估计**：根据分布假设估算输入数据的参数，如平均值、方差等。
   - **假设检验**：对假设的分布进行统计检验，验证分布的适用性。

2. **输出数据分析**
   - **输出数据的随机性**：仿真输出通常是具有随机性的变量，需多次采样和统计分析。
   - **统计分析**：计算输出数据的概率分布、期望值、方差等，设定置信区间。
   - **仿真类型**：
     - **终态仿真**：模型运行至明确定义的终止时刻，结果可能受初始条件影响。
     - **稳态仿真**：没有终止事件，仿真时间无限长，输出变量的分布趋于稳定，与初始条件无关。

### 离散事件仿真模型的验证与验证方法（第39-47页）

**模型验证的目的**
- **确保模型的准确性**：验证的目的是确保模型在结构和行为上与实际系统相符，输出结果具备可信度。
- **减少误差与偏差**：模型的构建过程中，可能引入假设性偏差和数据偏差。验证过程帮助识别这些偏差并加以修正。

---

**模型验证的主要方法**

1. **结构验证**
   - **目的**：检查模型结构是否与真实系统一致，确保模型逻辑正确。
   - **方法**：
     - **专家访谈**：请领域专家审阅模型的流程和逻辑。
     - **流程图检查**：通过审查模型流程图，确认事件序列和条件判断的合理性。
     - **代码审查**：对模型代码进行复查，确保模型实现与预期逻辑一致。

2. **行为验证**
   - **目的**：检查模型的动态行为是否符合实际系统的预期表现。
   - **方法**：
     - **极限测试**：将模型输入设置为极值（如0或极高值），观察模型行为是否符合逻辑。
     - **行为图对比**：将仿真输出与实际系统的数据进行对比，确保行为模式一致。
     - **敏感性分析**：调整模型中的关键参数，观察模型输出是否合乎逻辑并评估敏感性。

3. **数据驱动的验证**
   - **目的**：基于输入数据和输出结果的实际观察数据进行验证。
   - **方法**：
     - **历史数据比较**：将模型的仿真输出与系统历史数据进行对比。
     - **分布检验**：对比输出结果的分布特性是否符合实际系统数据的统计分布。
     - **平均值和标准差比较**：计算输出结果的统计特征（如均值、方差），与实际数据进行对比。

4. **黑盒测试与白盒测试**
   - **黑盒测试**：不考虑模型内部结构，仅基于输入与输出的关系验证模型。适用于用户仅关注模型输出而不关心其实现方式的情境。
   - **白盒测试**：基于模型内部逻辑和结构进行逐步测试，适合模型开发者使用，以检查每个模块的功能是否正确。

---

**仿真模型的有效性评估**

1. **Face Validity（表面有效性）**
   - **定义**：通过主观判断模型是否具有合理性和现实性。
   - **方法**：请专家或用户审阅模型的输出和表现，对其合理性进行主观评价。

2. **追踪验证**
   - **定义**：逐步追踪模型运行过程中的关键事件，确保每个事件的执行符合预期。
   - **方法**：通过观察和记录每个事件的发生顺序与输出结果，检查模型是否在所有步骤中表现正确。

3. **假设检验**
   - **定义**：对模型的假设进行统计检验，判断其适用性。
   - **方法**：使用统计测试（如T检验、卡方检验等），对模型输出的假设分布进行检验，确保其与实际情况相符。

---

**案例示例：银行排队系统的验证流程**

1. **结构验证**：审查顾客到达、等待、服务和离开四个主要流程，确认队列规则、服务顺序的设置合理。
2. **行为验证**：设置极限情况（如高峰时段的高流量、低需求等），观察排队时间和等待人数是否符合逻辑。
3. **数据验证**：将仿真结果与实际银行服务数据对比，例如顾客平均等待时间和服务效率，确保仿真结果准确。
4. **黑盒测试**：根据顾客到达率、服务速率等输入变量，检查输出的等待时间是否合理，不关注模型内部如何实现。
5. **白盒测试**：审查模型代码，确保各个模块正确执行，验证系统中每个事件的执行符合逻辑。

通过以上的验证步骤，可以有效提高模型的可信度和实用性，使其能够更准确地模拟现实系统的动态行为，为决策提供可靠依据。